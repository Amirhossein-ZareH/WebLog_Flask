{% extends "base.html" %}

{% block title %}خانه - وبلاگ من{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1>به وبلاگ من خوش آمدید</h1>
        <p>مکانی برای به اشتراک گذاری دانش و تجربیات</p>
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('create_post') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i> ایجاد پست جدید
            </a>
        {% else %}
            <a href="{{ url_for('register') }}" class="btn btn-primary">
                <i class="fas fa-user-plus"></i> شروع کنید
            </a>
        {% endif %}
    </div>
</div>

{% if posts %}
    <div class="posts-grid">
        {% for post in posts %}
        <div class="card post-card">
            <div class="post-header">
                <h2 class="post-title">{{ post.title }}</h2>
                <div class="post-meta">
                    <span><i class="far fa-calendar"></i> {{ post.created_at.strftime('%Y/%m/%d') }}</span>
                    <span><i class="fas fa-user"></i> {{ post.author.username }}</span>
                    {% if post.comments %}
                        <span><i class="far fa-comments"></i> {{ post.comments|length }} نظر</span>
                    {% endif %}
                </div>
            </div>
            
            <div class="post-content">
                {{ post.content[:200] }}...
            </div>
            
            <div class="post-actions">
                <a href="{{ url_for('post_detail', id=post.id) }}" class="btn btn-primary btn-small">
                    <i class="fas fa-eye"></i> مشاهده بیشتر
                </a>
                
                {% if current_user.is_authenticated and post.author == current_user %}
                    <a href="{{ url_for('edit_post', id=post.id) }}" class="btn btn-warning btn-small">
                        <i class="fas fa-edit"></i> ویرایش
                    </a>
                    <a href="{{ url_for('delete_post', id=post.id) }}" 
                    class="btn btn-danger btn-small"
                    onclick="return confirm('آیا از حذف این پست مطمئن هستید؟')">
                        <i class="fas fa-trash"></i> حذف
                    </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <i class="fas fa-newspaper fa-3x"></i>
        <h3>هنوز هیچ پستی وجود ندارد</h3>
        {% if current_user.is_authenticated %}
            <p>اولین پست را شما ایجاد کنید!</p>
            <a href="{{ url_for('create_post') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i> ایجاد پست
            </a>
        {% else %}
            <p>برای ایجاد پست وارد شوید</p>
        {% endif %}
    </div>
{% endif %}

<style>
    .hero-section {
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        color: white;
        padding: 60px 0;
        border-radius: var(--border-radius);
        margin-bottom: 40px;
        text-align: center;
    }
    
    .hero-content h1 {
        font-size: 2.5rem;
        margin-bottom: 15px;
    }
    
    .hero-content p {
        font-size: 1.2rem;
        margin-bottom: 25px;
        opacity: 0.9;
    }
    
    .posts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 25px;
        margin-top: 30px;
    }
    
    .post-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #f0f0f0;
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--gray);
    }
    
    .empty-state i {
        margin-bottom: 20px;
        color: var(--primary);
    }
    
    .empty-state h3 {
        margin-bottom: 10px;
        color: var(--dark);
    }
    
    .empty-state p {
        margin-bottom: 25px;
    }
</style>
{% endblock %}